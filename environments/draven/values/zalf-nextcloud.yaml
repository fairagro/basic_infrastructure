allowed_collabora_ips:
  - 161.97.79.221 # collabora.fairagro.net on external reverse proxy
allowed_reverse_proxy_ips: 161.97.79.221 # the extrenal reverse proxy IP
postgres_db:
  size: 4Gi
  storageClass: postgres
  resources:
    requests:
      cpu: '2'
      memory: 2G
    limits:
      cpu: '4'
      memory: 8G
cert_email_receiver: carsten.scharfenberg@zalf.de
geant_acme_key_id: OqJJqONZBNIdYFekHDIDRQ

nextcloud:
  ingress:
    className: nginx-external
    annotations:
      cert-manager.io/issuer: geant
      cert-manager.io/private-key-size: "4096"
      cert-manager.io/private-key-rotation-policy: "Always"
      # It seems the subjects annotation do not have any effect.
      # Still we keep them...
      cert-manager.io/subject-countries: "DE"
      cert-manager.io/subject-organizations: "NFDI FAIRagro"
      cert-manager.io/subject-organizationalunits: "Measure 4.1"
    tls:
      - secretName: nextcloud-tls-secret
        hosts:
          - nextcloud.fairagro.net

  nextcloud:
    host: nextcloud.fairagro.net # used as trusted_domain and as host header for probes
    mail:
      fromAddress: nextcloud
      domain: fairagro.net

  persistence:
    size: 4Gi
    nextcloudData:
      size: 100Gi

fairagro-onlyoffice:
  enabled: true

  image:
    repository: onlyoffice/documentserver-ee
    digest: sha256:97475275c84857de7102058bde2acc0af8651e3cd0b137c766d5153ca193081e # 8.2.2.1

  postgres:
    dbsize: 1Gi

  resources:
    limits:
      cpu: 4
      memory: 6Gi
    requests:
      cpu: 1
      memory: 2Gi

  ingress:
    className: nginx-external
    annotations:
      cert-manager.io/issuer: geant
      cert-manager.io/private-key-size: "4096"
      cert-manager.io/private-key-rotation-policy: "Always"
      # It seems the subjects annotation do not have any effect.
      # Still we keep them...
      cert-manager.io/subject-countries: "DE"
      cert-manager.io/subject-organizations: "NFDI FAIRagro"
      cert-manager.io/subject-organizationalunits: "Measure 4.1"
    hosts:
      - host: onlyoffice.fairagro.net
        paths:
          - path: /
            pathType: ImplementationSpecific
    tls:
      - secretName: onlyoffice-tls-secret
        hosts:
          - onlyoffice.fairagro.net

collabora-online:
  enabled: false

  collabora:
    aliasgroups:
      - host: "https://nextcloud.fairagro.net:443"
    server_name: collabora.fairagro.net

  ingress:
    className: nginx-external
    annotations:
      cert-manager.io/issuer: geant
      cert-manager.io/private-key-size: "4096"
      cert-manager.io/private-key-rotation-policy: "Always"
      # It seems the subjects annotation do not have any effect.
      # Still we keep them...
      cert-manager.io/subject-countries: "DE"
      cert-manager.io/subject-organizations: "NFDI FAIRagro"
      cert-manager.io/subject-organizationalunits: "Measure 4.1"
    hosts:
      - host: collabora.fairagro.net
        paths:
          - path: /
            pathType: ImplementationSpecific
    tls:
      - secretName: collabora-tls-secret
        hosts:
          - collabora.fairagro.net
