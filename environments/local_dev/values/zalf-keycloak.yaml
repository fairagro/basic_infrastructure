# Default values for keycloak.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

clusterDomain: "docker-desktop"
replicaCount: 1
httpRelativePath: "/keycloak"

ingress:
  annotations:
    {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: kubernetes.docker.internal
      paths:
        - path: /keycloak
          pathType: Prefix
  tls:
    - hosts:
        - kubernetes.docker.internal

resources:
  limits:
    cpu: 2.0
    memory: 2Gi
  requests:
    cpu: 1.0
    memory: 1Gi

keycloak:
  adminUser: admin

# ** Please be patient while the chart is being deployed **
# PostgreSQL can be accessed via port 5432 on the following DNS names from within your cluster:
#     fairagro-keycloak-postgres-postgresql.default.svc.cluster.local - Read/Write connection
# To get the password for "postgres" run:
#     export POSTGRES_PASSWORD=$(kubectl get secret --namespace default fairagro-keycloak-postgres-postgresql -o jsonpath="{.data.postgres-password}" | base64 -d)
# To connect to your database run the following command:
#     kubectl run fairagro-keycloak-postgres-postgresql-client --rm --tty -i --restart='Never' --namespace default --image docker.io/bitnami/postgresql:16.0.0-debian-11-r13
# --env="PGPASSWORD=$POSTGRES_PASSWORD" \
#       --command -- psql --host fairagro-keycloak-postgres-postgresql -U postgres -d postgres -p 5432
#     > NOTE: If you access the container using bash, make sure that you execute "/opt/bitnami/scripts/postgresql/entrypoint.sh /bin/bash" in order to avoid the error "psql: local user with ID 1001} does not exist"
# To connect to your database from outside the cluster execute the following commands:
#     kubectl port-forward --namespace default svc/fairagro-keycloak-postgres-postgresql 5432:5432 &
#     PGPASSWORD="$POSTGRES_PASSWORD" psql --host 127.0.0.1 -U postgres -d postgres -p 5432
database:
  type: postgres
  host: fairagro-keycloak-postgres-postgresql
  port: 5432
  username: postgres
