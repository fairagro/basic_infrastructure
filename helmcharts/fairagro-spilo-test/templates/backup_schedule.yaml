apiVersion: velero.io/v1
kind: Schedule
metadata:
  name: spilo-test-backup
  namespace: velero
spec:
  schedule: "0 0 */36500 * *"
  template:
    csiSnapshotTimeout: 10m0s
    defaultVolumesToFsBackup: False
    includedNamespaces:
      - fairagro-spilo-test
    # includedResources:
    #   - "*"
    includedResources:
      - configmaps
      - persistentvolumeclaims
      - secrets
      - serviceaccounts
      - postgresqls
      - deployments
      - statefulsets
      - ingresses
      - networkpolicies
      - roles
      - rolebindings
    labelSelector:
      matchExpressions:
        - key: application
          operator: NotIn
          values:
            - spilo
    itemOperationTimeout: 4h0m0s
    resourcePolicy:
      kind: configmap
      name: skip-postgres-volume-backup
    snapshotMoveData: True
    storageLocation: default
    ttl: 168h0m0s